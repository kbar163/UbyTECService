CREATE TABLE ADMINISTRADOR_UBY
(
    CEDULA_ADMIN_UBY VARCHAR(9) NOT NULL,
    NOMBRE VARCHAR(50) NOT NULL,
    PRIMER_APELLIDO VARCHAR(50) NOT NULL,
    SEGUNDO_APELLIDO VARCHAR(50) NOT NULL,
    CORREO_ELECTRONICO VARCHAR(50) NOT NULL,
    USUARIO_ADMIN_UBY VARCHAR(50) NOT NULL,
    PASSWORD_ADMIN_UBY VARCHAR(50) NOT NULL,
    PROVINCIA VARCHAR(50) NOT NULL,
    CANTON VARCHAR(50) NOT NULL,
    DISTRITO VARCHAR(50) NOT NULL
);

ALTER TABLE ADMINISTRADOR_UBY
ADD PRIMARY KEY (CEDULA_ADMIN_UBY);

ALTER TABLE ADMINISTRADOR_UBY
ADD CONSTRAINT U_ADMIN_USER UNIQUE (USUARIO_ADMIN_UBY);

ALTER TABLE ADMINISTRADOR_UBY
ADD CONSTRAINT U_ADMIN_EMAIL UNIQUE (CORREO_ELECTRONICO);

CREATE TABLE ADMINISTRADOR_AFILIADO
(
    NOMBRE VARCHAR(50) NOT NULL,
    PRIMER_APELLIDO VARCHAR(50) NOT NULL,
    SEGUNDO_APELLIDO VARCHAR(50) NOT NULL,
    CORREO_ELECTRONICO VARCHAR(50) NOT NULL,
    USUARIO_ADMIN_AFI VARCHAR(50) NOT NULL,
    PASSWORD_ADMIN_AFI VARCHAR(50) NOT NULL,
    PROVINCIA VARCHAR(50) NOT NULL,
    CANTON VARCHAR(50) NOT NULL,
    DISTRITO VARCHAR(50) NOT NULL,
    ACTIVO BOOLEAN NOT NULL
);

ALTER TABLE ADMINISTRADOR_AFILIADO
ADD PRIMARY KEY (USUARIO_ADMIN_AFI);

ALTER TABLE ADMINISTRADOR_AFILIADO
ADD CONSTRAINT U_ADMIN_AFI_EMAIL UNIQUE (CORREO_ELECTRONICO);

CREATE TABLE CLIENTE
(
    CEDULA_CLIENTE VARCHAR(9) NOT NULL,
    NOMBRE VARCHAR(50) NOT NULL,
    PRIMER_APELLIDO VARCHAR(50) NOT NULL,
    SEGUNDO_APELLIDO VARCHAR(50) NOT NULL,
    FECHA_NACIMIENTO TIMESTAMP NOT NULL,
    CORREO_ELECTRONICO VARCHAR(50) NOT NULL,
    USUARIO_CLIENTE VARCHAR(50) NOT NULL,
    PASSWORD_CLIENTE VARCHAR(50) NOT NULL,
    PROVINCIA VARCHAR(50) NOT NULL,
    CANTON VARCHAR(50) NOT NULL,
    DISTRITO VARCHAR(50) NOT NULL
);

ALTER TABLE CLIENTE
ADD PRIMARY KEY (CEDULA_CLIENTE);

ALTER TABLE CLIENTE
ADD CONSTRAINT U_CLIENTE_USER UNIQUE (USUARIO_CLIENTE);

ALTER TABLE CLIENTE
ADD CONSTRAINT U_CLIENTE_EMAIL UNIQUE (CORREO_ELECTRONICO);

CREATE TABLE ADMIN_UBY_TELEFONOS
(
    ID SERIAL,
    CEDULA_ADMIN_UBY VARCHAR(9),
    TELEFONO VARCHAR(8)
);

ALTER TABLE ADMIN_UBY_TELEFONOS
ADD PRIMARY KEY (ID);

ALTER TABLE ADMIN_UBY_TELEFONOS
ADD CONSTRAINT U_ADMIN_UBY_TELEFONO UNIQUE (TELEFONO);

ALTER TABLE ADMIN_UBY_TELEFONOS
ADD CONSTRAINT FK_TELEFONOS_ADMIN_UBY
FOREIGN KEY (CEDULA_ADMIN_UBY) REFERENCES ADMINISTRADOR_UBY(CEDULA_ADMIN_UBY);

CREATE TABLE ADMIN_AFI_TELEFONOS
(
    ID SERIAL,
    USUARIO_ADMIN_AFI VARCHAR(9),
    TELEFONO VARCHAR(8)
);

ALTER TABLE ADMIN_AFI_TELEFONOS
ADD PRIMARY KEY (ID);

ALTER TABLE ADMIN_AFI_TELEFONOS
ADD CONSTRAINT U_ADMIN_AFI_TELEFONO UNIQUE (TELEFONO);

ALTER TABLE ADMIN_AFI_TELEFONOS
ADD CONSTRAINT FK_TELEFONOS_ADMIN_AFI
FOREIGN KEY (USUARIO_ADMIN_AFI) REFERENCES ADMINISTRADOR_AFILIADO(USUARIO_ADMIN_AFI);


CREATE TABLE CLIENTE_TELEFONOS
(
    ID SERIAL,
    CEDULA_CLIENTE VARCHAR(9),
    TELEFONO VARCHAR(8)
);

ALTER TABLE CLIENTE_TELEFONOS
ADD PRIMARY KEY (ID);

ALTER TABLE CLIENTE_TELEFONOS
ADD CONSTRAINT U_CLIENTE_TELEFONO UNIQUE (TELEFONO);

ALTER TABLE CLIENTE_TELEFONOS
ADD CONSTRAINT FK_TELEFONOS_CLIENTE
FOREIGN KEY (CEDULA_CLIENTE) REFERENCES CLIENTE(CEDULA_CLIENTE);

CREATE TABLE TIPO_COMERCIO
(
    ID_TIPO INT NOT NULL,
    NOMBRE_TIPO VARCHAR(30) NOT NULL
);

ALTER TABLE TIPO_COMERCIO
ADD PRIMARY KEY (ID_TIPO);

CREATE TABLE AFILIADO
(
    CEDULA_JURIDICA VARCHAR(12) NOT NULL,
    NOMBRE_COMERCIO VARCHAR(50) NOT NULL,
    SINPE_MOVIL VARCHAR(8) NOT NULL,
    CORREO VARCHAR(50) NOT NULL,
    PROVINCIA VARCHAR(50) NOT NULL,
    CANTON VARCHAR(50) NOT NULL,
    DISTRITO VARCHAR(50) NOT NULL,
    COMENTARIO_SOLICITUD VARCHAR(200),
    ACTIVO BOOLEAN NOT NULL,
    TIPO INT NOT NULL
);

ALTER TABLE AFILIADO
ADD PRIMARY KEY (CEDULA_JURIDICA);

ALTER TABLE AFILIADO
ADD CONSTRAINT U_AFILIADO_CORREO UNIQUE (CORREO);

ALTER TABLE AFILIADO
ADD CONSTRAINT FK_AFILIADO_TIPO
FOREIGN KEY (TIPO) REFERENCES TIPO_COMERCIO(ID_TIPO);

CREATE TABLE AFILIADO_TELEFONOS
(
    ID SERIAL,
    CEDULA_JURIDICA VARCHAR(12),
    TELEFONO VARCHAR(8)
);

ALTER TABLE AFILIADO_TELEFONOS
ADD PRIMARY KEY (ID);

ALTER TABLE AFILIADO_TELEFONOS
ADD CONSTRAINT U_AFILIADO_TELEFONO UNIQUE (TELEFONO);

ALTER TABLE AFILIADO_TELEFONOS
ADD CONSTRAINT FK_TELEFONOS_AFILIADO
FOREIGN KEY (CEDULA_JURIDICA) REFERENCES AFILIADO(CEDULA_JURIDICA);