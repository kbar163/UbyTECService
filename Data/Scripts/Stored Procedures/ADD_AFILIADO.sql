--Caso para un solo numero de telefono
CREATE OR REPLACE PROCEDURE ADD_AFILIADO(
	CEDULA_JURIDICA_SP VARCHAR(12),
	NOMBRE_AFILIADO_SP VARCHAR(50),
	SINPE_SP VARCHAR(8),
	CORREO_AFILIADO_SP VARCHAR(50),
	PROVINCIA_AFILIADO_SP VARCHAR(50),
	CANTON_AFILIADO_SP VARCHAR(50),
	DISTRITO_AFILIADO_SP VARCHAR(50),
	COMENTARIO_SOL_SP VARCHAR(200),
	ACTIVO_AFILIADO_SP BOOL,
	TIPO_AFILIADO_SP INT,
	TELEFONO_AFILIADO_1_SP VARCHAR(8))
	
language plpgsql
as $$
begin
-- stored procedure body
INSERT INTO AFILIADO
VALUES
(CEDULA_JURIDICA_SP,NOMBRE_AFILIADO_SP,SINPE_SP,CORREO_AFILIADO_SP,PROVINCIA_AFILIADO_SP,
CANTON_AFILIADO_SP,DISTRITO_AFILIADO_SP,COMENTARIO_SOL_SP,ACTIVO_AFILIADO_SP,TIPO_AFILIADO_SP);

INSERT INTO AFILIADO_TELEFONOS
VALUES
(DEFAULT,CEDULA_JURIDICA_SP,TELEFONO_AFILIADO_1_SP);
end; $$

--Caso para cuando hay 2 numeros de telefono
CREATE OR REPLACE PROCEDURE ADD_AFILIADO(
	CEDULA_JURIDICA_SP VARCHAR(12),
	NOMBRE_AFILIADO_SP VARCHAR(50),
	SINPE_SP VARCHAR(8),
	CORREO_AFILIADO_SP VARCHAR(50),
	PROVINCIA_AFILIADO_SP VARCHAR(50),
	CANTON_AFILIADO_SP VARCHAR(50),
	DISTRITO_AFILIADO_SP VARCHAR(50),
	COMENTARIO_SOL_SP VARCHAR(200),
	ACTIVO_AFILIADO_SP BOOL,
	TIPO_AFILIADO_SP INT,
	TELEFONO_AFILIADO_1_SP VARCHAR(8),
	TELEFONO_AFILIADO_2_SP VARCHAR(8))
	
language plpgsql
as $$
begin
-- stored procedure body
INSERT INTO AFILIADO
VALUES
(CEDULA_JURIDICA_SP,NOMBRE_AFILIADO_SP,SINPE_SP,CORREO_AFILIADO_SP,PROVINCIA_AFILIADO_SP,
CANTON_AFILIADO_SP,DISTRITO_AFILIADO_SP,COMENTARIO_SOL_SP,ACTIVO_AFILIADO_SP,TIPO_AFILIADO_SP);

INSERT INTO AFILIADO_TELEFONOS
VALUES
(DEFAULT,CEDULA_JURIDICA_SP,TELEFONO_AFILIADO_1_SP),
(DEFAULT,CEDULA_JURIDICA_SP,TELEFONO_AFILIADO_2_SP);
end; $$